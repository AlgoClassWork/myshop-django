{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ú–∞–≥–∞–∑–∏–Ω</title>
  <link rel="stylesheet" href="{% static 'css/product_list.css' %}">
</head>
<body>

  <!-- Header Section -->
  <header>
    <div class="container">
      <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∞–≥–∞–∑–∏–Ω</h1>
      <a href="{% url 'cart' %}" class="cart-link">–ö–æ—Ä–∑–∏–Ω–∞</a>
      {% if user.is_authenticated %}
        <p> –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å  {{user.username}}</p>
        <form action="{% url 'logout' %}" method="post"> 
          {% csrf_token %}
          <button> –í—ã–π—Ç–∏ </button>
        </form>
      {% else %}
        <a href="{% url 'login' %}"> –í–æ–π—Ç–∏ </a>
        <a href="{% url 'register' %}"> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è </a>
      {% endif %}
    </div>
  </header>

  <!-- Categories Section -->
  <section class="categories">
    <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:</h3>
    <ul>
      {% for category in categories %}
        <li><a href="{% url 'category_products' category.id %}">üõç {{ category.name }}</a></li>
      {% endfor %}
    </ul>

    <form method="get">
      <label> –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: </label>
      <select name="sort" onchange="this.form.submit()">
        <option value=""> –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é </option>
        <option value="rating" {% if sort == 'rating' %} selected {% endif %} > –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É </option>
        <option value="price" {% if sort == 'price' %} selected {% endif %} > –ü–æ —Ü–µ–Ω–µ </option>
      </select>
    </form>
    
  </section>

  <!-- Products Section -->
  <section class="products">
    <h2>–¢–æ–≤–∞—Ä—ã:</h2>
    <div class="product-container">
      {% for product in products %}
        <div class="product-card">
          <img src="{{ product.image.url }}" alt="{{ product.title }}">
          <h4>{{ product.title }}</h4>
          <p>{{ product.price }} —Ä—É–±.</p>
          <a href="{% url 'product_detail' product.id %}" class="btn-detail">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
        </div>
      {% endfor %}
    </div>
  </section>

  <!-- Footer Section -->
  <footer>
    <div class="container">
      <p>&copy; 2025 –ú–∞–≥–∞–∑–∏–Ω. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </div>
  </footer>

</body>
</html>
